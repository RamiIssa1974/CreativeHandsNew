{"ast":null,"code":"import { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../../../services/auth.service';\nimport { PurchaseService } from '../../../services/purchase.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../services/purchase.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../../services/auth.service\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"is-invalid\": a0\n});\nfunction AddEditProviderComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelement(1, \"img\", 26);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let AddEditProviderComponent = /*#__PURE__*/(() => {\n  class AddEditProviderComponent {\n    get isLoggedIn() {\n      return this.authService.isLoggedIn;\n    }\n    get isAdmin() {\n      return this.authService.isAdmin;\n    }\n    get providersId() {\n      return this.providerForm.get('Id');\n    }\n    get providersName() {\n      return this.providerForm.get('Name');\n    }\n    get providersIdN() {\n      return this.providerForm.get('IdN');\n    }\n    get providersTel1() {\n      return this.providerForm.get('Tel1');\n    }\n    get providersTel2() {\n      return this.providerForm.get('Tel2');\n    }\n    get providersAddress() {\n      return this.providerForm.get('Address');\n    }\n    get providersEmail() {\n      return this.providerForm.get('Email');\n    }\n    get providersDescription() {\n      return this.providerForm.get('Description');\n    }\n    get providersWebSite() {\n      return this.providerForm.get('WebSite');\n    }\n    get providersIsActive() {\n      return this.providerForm.get('IsActive');\n    }\n    constructor(route, purchaseServices, fb, authService, router) {\n      this.route = route;\n      this.purchaseServices = purchaseServices;\n      this.fb = fb;\n      this.authService = authService;\n      this.router = router;\n      this.isLoading = false;\n      this.providerId = -1;\n      this.provider = null;\n      this.errorMessage = 'OK';\n      this.providerForm = new FormGroup({});\n    }\n    ngOnInit() {\n      if (!(this.isLoggedIn && this.isAdmin)) {\n        const redirectUrl = this.authService.redirectUrl || '/'; // Default redirect URL\n        this.router.navigateByUrl(redirectUrl);\n      }\n      this.providerForm = this.getEmptyForm();\n      this.route.params.subscribe(params => {\n        this.providerId = params['id'];\n        if (this.providerId != null) {\n          this.purchaseServices.getProviders().subscribe({\n            next: providers => {\n              this.provider = providers.find(pr => pr.Id == this.providerId) || null;\n              if (this.provider) {\n                this.providerForm = this.getFormFromProvider(this.provider);\n              } else {\n                this.providerForm = this.getEmptyForm();\n              }\n            },\n            error: err => this.errorMessage = err\n          });\n        } else {\n          this.providerForm = this.getEmptyForm();\n        }\n      });\n    }\n    getEmptyForm() {\n      return this.fb.group({\n        Id: [{\n          value: 0,\n          disabled: true\n        }],\n        Name: [\"\", [Validators.required, Validators.minLength(3)]],\n        IdN: \"\",\n        Tel1: [\"\", [Validators.required, Validators.minLength(9)]],\n        Tel2: \"\",\n        Address: \"\",\n        Email: \"\",\n        Description: \"\",\n        WebSite: \"\",\n        IsActive: \"\"\n      });\n    }\n    getFormFromProvider(provider) {\n      var formGroup = this.fb.group({\n        Id: [{\n          value: provider.Id,\n          disabled: true\n        }],\n        Name: [provider.Name, [Validators.required, Validators.minLength(3)]],\n        IdN: provider.IdN,\n        Tel1: [provider.Tel1, [Validators.required, Validators.minLength(9)]],\n        Tel2: provider.Tel2,\n        Address: provider.Address,\n        Email: provider.Email,\n        Description: provider.Description,\n        WebSite: provider.WebSite,\n        IsActive: provider.IsActive\n      });\n      return formGroup;\n    }\n    saveProvider() {\n      this.isLoading = true;\n      let request = {\n        Id: this.providersId.value,\n        Name: this.providersName.value,\n        IdN: this.providersIdN.value,\n        Tel1: this.providersTel1.value,\n        Tel2: this.providersTel2.value,\n        Address: this.providersAddress.value,\n        Email: this.providersEmail.value == null ? \"\" : this.providersEmail.value,\n        Description: this.providersDescription.value == null ? \"\" : this.providersDescription.value,\n        WebSite: this.providersWebSite.value,\n        IsActive: this.providersIsActive.value\n      };\n      this.purchaseServices.saveProvider(request).subscribe(provId => {\n        this.isLoading = false;\n        this.router.navigateByUrl('/provider/' + provId);\n      });\n    }\n    static #_ = this.ɵfac = function AddEditProviderComponent_Factory(t) {\n      return new (t || AddEditProviderComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PurchaseService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i1.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AddEditProviderComponent,\n      selectors: [[\"app-add-edit-provider\"]],\n      decls: 43,\n      vars: 9,\n      consts: [[\"novalidate\", \"\", 3, \"ngSubmit\", \"formGroup\"], [\"class\", \"overlay\", 4, \"ngIf\"], [1, \"card-body\"], [1, \"provider-info\"], [1, \"row\"], [\"for\", \"idId\", 1, \"data-label\"], [\"id\", \"idId\", \"formControlName\", \"Id\", 1, \"form-control\", \"product-price\", 3, \"disabled\"], [\"for\", \"nameId\", 1, \"data-label\"], [\"id\", \"nameId\", \"formControlName\", \"Name\", 1, \"product-name\", \"form-control\", 3, \"ngClass\"], [\"for\", \"idNId\", 1, \"data-label\"], [\"id\", \"idNId\", \"formControlName\", \"IdN\", 1, \"product-price\", \"form-control\"], [\"for\", \"tel1Id\", 1, \"data-label\"], [\"id\", \"tel1Id\", \"formControlName\", \"Tel1\", 1, \"product-sale-price\", \"form-control\", 3, \"ngClass\"], [\"for\", \"tel2Id\", 1, \"data-label\"], [\"id\", \"tel2Id\", \"formControlName\", \"Tel2\", 1, \"product-barcode\", \"form-control\"], [\"for\", \"addressId\", 1, \"data-label\"], [\"id\", \"addressId\", \"formControlName\", \"Address\", 1, \"product-stockQuantity\", \"form-control\"], [\"for\", \"emailId\", 1, \"data-label\"], [\"formControlName\", \"Email\", 1, \"product-Description\", \"form-control\"], [\"for\", \"websiteId\", 1, \"data-label\"], [\"id\", \"websiteId\", \"formControlName\", \"WebSite\", 1, \"product-stockQuantity\", \"form-control\"], [\"for\", \"descriptionId\", 1, \"data-label\"], [\"id\", \"descriptionId\", \"formControlName\", \"Description\", 1, \"product-Description\", \"form-control\"], [1, \"submit-div\"], [\"type\", \"submit\", \"title\", \"\\u062D\\u0641\\u0638\", 1, \"btn\", \"btn-primary\", \"mr-3\"], [1, \"overlay\"], [\"src\", \"/assets/Images/loading.gif\", 1, \"waiting-image\"]],\n      template: function AddEditProviderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"form\", 0);\n          i0.ɵɵlistener(\"ngSubmit\", function AddEditProviderComponent_Template_form_ngSubmit_0_listener() {\n            return ctx.saveProvider();\n          });\n          i0.ɵɵtemplate(1, AddEditProviderComponent_div_1_Template, 2, 0, \"div\", 1);\n          i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"label\", 5);\n          i0.ɵɵtext(6, \"\\u0627\\u0644\\u0645\\u0639\\u0631\\u0641:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(7, \"input\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"div\", 4)(9, \"label\", 7);\n          i0.ɵɵtext(10, \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0632\\u0648\\u062F:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(11, \"input\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 4)(13, \"label\", 9);\n          i0.ɵɵtext(14, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0648\\u064A\\u0647:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"input\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 4)(17, \"label\", 11);\n          i0.ɵɵtext(18, \"\\u0647\\u0627\\u062A\\u0641 1:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(19, \"input\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 4)(21, \"label\", 13);\n          i0.ɵɵtext(22, \"\\u0647\\u0627\\u062A\\u0641 2:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(23, \"input\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"div\", 4)(25, \"label\", 15);\n          i0.ɵɵtext(26, \"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(27, \"input\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"div\", 4)(29, \"label\", 17);\n          i0.ɵɵtext(30, \"\\u0628\\u0631\\u064A\\u062F \\u0627\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(31, \"input\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"div\", 4)(33, \"label\", 19);\n          i0.ɵɵtext(34, \"\\u0627\\u0644\\u0645\\u0648\\u0642\\u0639 \\u0627\\u0644\\u0627\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(35, \"input\", 20);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"div\", 4)(37, \"label\", 21);\n          i0.ɵɵtext(38, \"\\u0627\\u0644\\u0648\\u0635\\u0641:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(39, \"textarea\", 22);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"div\", 23)(41, \"button\", 24);\n          i0.ɵɵtext(42, \"\\u062D\\u0641\\u0638\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"formGroup\", ctx.providerForm);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", true);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, (ctx.providersName.touched || ctx.providersName.dirty) && !ctx.providersName.valid));\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, (ctx.providersTel1.touched || ctx.providersTel1.dirty) && !ctx.providersTel1.valid));\n        }\n      },\n      dependencies: [i5.NgClass, i5.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n      styles: [\".overlay[_ngcontent-%COMP%]{background:#e9e9e9;position:absolute;inset:0;opacity:.5;z-index:1}.waiting-image[_ngcontent-%COMP%]{position:absolute;top:50%;left:45%}.card-body[_ngcontent-%COMP%]{position:relative;border:10px solid aliceblue;background-color:#ddd8c1;width:100%;text-align:center}.form-group.row[_ngcontent-%COMP%]{text-align:right}.submit-div[_ngcontent-%COMP%]{width:100%;margin:auto;text-align:center}.submit-div[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:200px}.product-variations[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%], .product-image[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%], .new-files-list[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{cursor:pointer;float:left;margin:5px 5px 0 10px;width:20px;height:20px;background-color:transparent}.data-label[_ngcontent-%COMP%]{margin-right:20px;font-weight:700;text-align:right;min-width:120px}.product-item[_ngcontent-%COMP%]{padding:7px;border:5px solid red;border-radius:10px;width:240px;display:inline-block;margin:10px}.provider-info[_ngcontent-%COMP%]{padding:20px;width:50%;display:inline-block;background-color:#f0f8ff;border:1px solid orange;border-radius:10px}.provider-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0 0 5px}.provider-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .provider-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .provider-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:70%}.data-label[_ngcontent-%COMP%]{margin-right:10px;margin-left:5px;font-weight:700;text-align:right;width:auto}@media only screen and (max-width: 600px){.provider-info[_ngcontent-%COMP%]{padding:20px;width:100%;display:inline-block;background-color:#f0f8ff;border:1px solid orange;border-radius:10px}.provider-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .provider-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .provider-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:90%;margin-right:10px}.data-label[_ngcontent-%COMP%]{margin-right:10px;font-weight:700;text-align:right;width:25%}.card-body[_ngcontent-%COMP%]{padding:0;border:none}.product-info[_ngcontent-%COMP%]{padding:20px;width:100%;display:inline-block;background-color:#f0f8ff}}\"]\n    });\n  }\n  return AddEditProviderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}