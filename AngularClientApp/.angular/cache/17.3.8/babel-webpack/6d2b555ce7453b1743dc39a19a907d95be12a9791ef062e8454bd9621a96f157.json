{"ast":null,"code":"import { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CustomValidator } from '../../Model/Validators/CustomValidators';\nimport { AuthService } from '../../services/auth.service';\nimport { ProductsService } from '../../services/products.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/products.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../services/auth.service\";\nimport * as i5 from \"ngx-color-picker\";\nimport * as i6 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"is-invalid\": a0\n});\nconst _c1 = a0 => ({\n  \"background-color\": a0\n});\nconst _c2 = a0 => ({\n  \"checked\": a0\n});\nfunction AddEditProductComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵelement(1, \"img\", 43);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditProductComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtext(1, \" \\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0627\\u062F\\u0631\\u0627\\u062C \\u0635\\u0648\\u0631\\u0647 \\u0648\\u0627\\u062D\\u062F\\u0647 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0623\\u0642\\u0644 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditProductComponent_div_36_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"div\", 53);\n    i0.ɵɵelement(2, \"img\", 54);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 55);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 56)(6, \"img\", 57);\n    i0.ɵɵlistener(\"click\", function AddEditProductComponent_div_36_div_1_Template_img_click_6_listener() {\n      const ctx_r3 = i0.ɵɵrestoreView(_r3);\n      const image_r5 = ctx_r3.$implicit;\n      const index_r6 = ctx_r3.index;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.deleteFile(image_r5, index_r6));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const image_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"/assets/Images/\", image_r5.value, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(image_r5.value);\n  }\n}\nfunction AddEditProductComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45);\n    i0.ɵɵtemplate(1, AddEditProductComponent_div_36_div_1_Template, 7, 3, \"div\", 46);\n    i0.ɵɵelementStart(2, \"div\", 47)(3, \"label\", 48);\n    i0.ɵɵelement(4, \"img\", 49);\n    i0.ɵɵtext(5, \"\\u0627\\u062E\\u062A\\u0631 \\u0635\\u0648\\u0631\\u0647\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 50);\n    i0.ɵɵelementStart(7, \"input\", 51, 2);\n    i0.ɵɵlistener(\"change\", function AddEditProductComponent_div_36_Template_input_change_7_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const fileUploader_r8 = i0.ɵɵreference(8);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.onSelectFile(fileUploader_r8.files));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.productImages);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r6.selectedfileName);\n  }\n}\nfunction AddEditProductComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 58)(1, \"div\", 59)(2, \"label\", 60);\n    i0.ɵɵtext(3, \"\\u0627\\u0644\\u0648\\u0635\\u0641:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"label\", 61);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"label\", 60);\n    i0.ɵɵtext(7, \"\\u0627\\u0644\\u0633\\u0639\\u0631:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"label\", 62);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 56)(11, \"img\", 57);\n    i0.ɵɵlistener(\"click\", function AddEditProductComponent_div_38_Template_img_click_11_listener() {\n      const index_r10 = i0.ɵɵrestoreView(_r9).index;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deleteProductVariations(index_r10));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const prVar_r11 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", prVar_r11);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(prVar_r11.value.Description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(prVar_r11.value.Price);\n  }\n}\nfunction AddEditProductComponent_div_57_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 63);\n    i0.ɵɵelement(1, \"div\", 64);\n    i0.ɵɵelementStart(2, \"div\", 56)(3, \"img\", 65);\n    i0.ɵɵlistener(\"click\", function AddEditProductComponent_div_57_Template_img_click_3_listener() {\n      const index_r15 = i0.ɵɵrestoreView(_r14).index;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deleteAvailableColour(index_r15));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const prClr_r16 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", prClr_r16)(\"ngStyle\", i0.ɵɵpureFunction1(2, _c1, prClr_r16.value.Colour));\n  }\n}\nfunction AddEditProductComponent_div_61_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 71)(1, \"label\", 72)(2, \"input\", 73);\n    i0.ɵɵtwoWayListener(\"checkedChange\", function AddEditProductComponent_div_61_li_7_Template_input_checkedChange_2_listener($event) {\n      const cat_r18 = i0.ɵɵrestoreView(_r17).$implicit;\n      i0.ɵɵtwoWayBindingSet(cat_r18.IsBelongToProduct, $event) || (cat_r18.IsBelongToProduct = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function AddEditProductComponent_div_61_li_7_Template_input_change_2_listener($event) {\n      const cat_r18 = i0.ɵɵrestoreView(_r17).$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.onCatChange($event, cat_r18.Id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const cat_r18 = ctx.$implicit;\n    const index_r19 = ctx.index;\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"for\", \"cat\", index_r19, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"id\", \"cat\", index_r19, \"\");\n    i0.ɵɵpropertyInterpolate1(\"name\", \"cat\", index_r19, \"\");\n    i0.ɵɵpropertyInterpolate(\"title\", cat_r18.Name);\n    i0.ɵɵpropertyInterpolate(\"value\", cat_r18.Id);\n    i0.ɵɵtwoWayProperty(\"checked\", cat_r18.IsBelongToProduct);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(11, _c2, cat_r18.IsBelongToProduct === true));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", cat_r18.Name, \" \");\n  }\n}\nfunction AddEditProductComponent_div_61_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 74);\n    i0.ɵɵtext(1, \" \\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u062A\\u0635\\u0646\\u064A\\u0642 \\u0648\\u0627\\u062D\\u062F \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0623\\u0642\\u0644 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditProductComponent_div_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66)(1, \"div\")(2, \"label\", 67);\n    i0.ɵɵtext(3, \"\\u0627\\u0644\\u062A\\u0635\\u0646\\u064A\\u0641\\u0627\\u062A:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\")(5, \"div\", 68)(6, \"ul\");\n    i0.ɵɵtemplate(7, AddEditProductComponent_div_61_li_7_Template, 4, 13, \"li\", 69);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(8, AddEditProductComponent_div_61_div_8_Template, 2, 0, \"div\", 70);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.categories);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.productForm.controls[\"Categories\"].errors);\n  }\n}\nexport let AddEditProductComponent = /*#__PURE__*/(() => {\n  class AddEditProductComponent {\n    // Accessors\n    get isLoggedIn() {\n      return this.authService.isLoggedIn;\n    }\n    get isAdmin() {\n      return this.authService.isAdmin;\n    }\n    get fileUploaders() {\n      //console.log(JSON.stringify(this.productForm.controls['file_uploaders']));\n      return this.productForm.controls['file_uploaders'].value;\n    }\n    get productImages() {\n      return this.productForm.controls['Images'].value.controls;\n    }\n    get prodId() {\n      return this.productForm.get('Id');\n    }\n    get prodName() {\n      return this.productForm.get('Name');\n    }\n    get prodPrice() {\n      return this.productForm.get('Price');\n    }\n    get prodDescription() {\n      return this.productForm.get('Description');\n    }\n    get prodSalePrice() {\n      return this.productForm.get('SalePrice');\n    }\n    get prodStockQuantity() {\n      return this.productForm.get('StockQuantity');\n    }\n    get prodBarcode() {\n      return this.productForm.get('Barcode');\n    }\n    get productVariations() {\n      return this.productForm.get('ProductVariations');\n    }\n    get prodAvailableColours() {\n      return this.productForm.get('AvailableColours');\n    }\n    constructor(route, productServices, fb, authService, router) {\n      this.route = route;\n      this.productServices = productServices;\n      this.fb = fb;\n      this.authService = authService;\n      this.router = router;\n      this.newFiles = [];\n      this.deletedFiles = [];\n      this.isLoading = false;\n      this.productId = -1;\n      this.product = null;\n      this.categories = [];\n      this.filesToUpload = [];\n      this.selectedfileName = \"please select a file\";\n      this.errorMessage = 'OK';\n      this.productForm = new FormGroup({});\n      this.filesCounter = 0;\n      this.colours = [];\n      this.selectedColour = '#0000ff';\n    }\n    ngOnInit() {\n      if (!(this.isLoggedIn && this.isAdmin)) {\n        this.router.navigateByUrl(this.authService.redirectUrl || '/');\n      }\n      this.productForm = this.getEmptyForm();\n      this.route.params.subscribe(params => {\n        this.productId = params['id'];\n        //console.log(\"this.productId:\" + JSON.stringify(params));\n        this.productServices.getCategories().subscribe({\n          next: cats => {\n            cats.forEach(cat => cat.IsBelongToProduct = false);\n            this.categories = cats;\n          },\n          error: err => this.errorMessage = err\n        });\n        if (this.productId != null) {\n          let search = {\n            Id: this.productId,\n            Barcode: \"\",\n            Description: \"\",\n            Name: \"\",\n            CategoryId: -1,\n            SubCategoryId: -1\n          };\n          this.productServices.getProducts(search).subscribe({\n            next: products => {\n              this.product = products[0];\n              this.categories.forEach(cat => {\n                cat.IsBelongToProduct = this.product?.Categories?.some(ct => ct.Id === cat.Id) || false;\n              });\n              this.productForm = this.getFormFromProduct(this.product);\n            },\n            error: err => this.errorMessage = err\n          });\n        } else {\n          this.productForm = this.getEmptyForm();\n        }\n      });\n    }\n    onCatChange(event, catId) {\n      const isChecked = event.target.checked;\n      const category = this.categories.find(cat => cat.Id === catId);\n      if (category) {\n        category.IsBelongToProduct = isChecked;\n        const categoriesArray = this.productForm.get('Categories');\n        if (isChecked) {\n          categoriesArray.push(new FormControl(catId));\n        } else {\n          const index = categoriesArray.controls.findIndex(ctrl => ctrl.value === catId);\n          if (index !== -1) {\n            categoriesArray.removeAt(index);\n          }\n        }\n        categoriesArray.updateValueAndValidity();\n        this.productForm.updateValueAndValidity();\n      }\n    }\n    // onSelectFile(files: FileList) {\n    //   //console.log(\"url\" + JSON.stringify(files[0]));\n    //   this.selectedfileName = files[0].name;\n    //   //this.filesToUpload.push.apply(this.filesToUpload, files);\n    //   this.filesToUpload.push(...files);\n    //   (this.productForm.controls['Images'].value as FormArray).push(new FormControl([files[0].name]));\n    //   this.productForm.controls['Images'].updateValueAndValidity();\n    //   this.productForm.updateValueAndValidity();\n    // }\n    onSelectFile(files) {\n      if (files.length > 0) {\n        // Convert FileList to an array of File objects\n        const fileArray = Array.from(files);\n        // Spread the fileArray into filesToUpload\n        this.filesToUpload.push(...fileArray);\n        // Optionally, update the form control for images\n        this.productForm.controls['Images'].push(new FormControl([fileArray[0].name]));\n        this.productForm.controls['Images'].updateValueAndValidity();\n        this.productForm.updateValueAndValidity();\n      }\n    }\n    deleteFile(filename, index) {\n      //this.productForm.controls['Images'].value.removeAt(index);\n      this.productForm.get('Images').removeAt(index);\n      this.filesToUpload.splice(index, 1);\n      this.productForm.controls['Images'].updateValueAndValidity();\n      this.productForm.updateValueAndValidity();\n    }\n    getEmptyForm() {\n      return this.fb.group({\n        Id: [{\n          value: 0,\n          disabled: true\n        }],\n        Name: [\"\", [Validators.required, Validators.minLength(3)]],\n        Description: \"\",\n        Price: [\"\", [Validators.required, Validators.min(0.01), CustomValidator.numeric]],\n        SalePrice: [\"\", [Validators.min(0), CustomValidator.numeric]],\n        StockQuantity: [\"\", [Validators.required, Validators.min(0), CustomValidator.numeric]],\n        Barcode: \"\",\n        CategoryId: 0,\n        SubCategoryId: 0,\n        Images: this.fb.array([]),\n        Categories: this.fb.array([]),\n        ProductVariations: this.fb.array([]),\n        AvailableColours: this.fb.array([])\n      });\n    }\n    getFormFromProduct(product) {\n      return this.fb.group({\n        Id: [{\n          value: product.Id,\n          disabled: true\n        }],\n        Name: [product.Name, [Validators.required, Validators.minLength(3)]],\n        Description: product.Description,\n        Price: [product.Price, [Validators.required, Validators.min(0), CustomValidator.numeric]],\n        SalePrice: [product.SalePrice, [Validators.min(0), CustomValidator.numeric]],\n        StockQuantity: [product.StockQuantity, [Validators.required, Validators.min(0), CustomValidator.numeric]],\n        Barcode: product.Barcode,\n        CategoryId: product.CategoryId,\n        SubCategoryId: product.SubCategoryId,\n        Images: this.getImagesArray(product),\n        Categories: this.getCategoreisArray(product),\n        ProductVariations: this.getProductVariationsArray(product),\n        AvailableColours: this.getProductAvailableColoursArray(product) // Ensure this is initialized properly\n      });\n    }\n    getImagesArray(product) {\n      var imagesFgArr = this.fb.array([]);\n      product.Images.forEach(im => imagesFgArr.push(new FormControl([im])));\n      return imagesFgArr;\n    }\n    getCategoreisArray(product) {\n      var imagesFgArr = this.fb.array([]);\n      product.Categories.forEach(ct => imagesFgArr.push(new FormControl([ct.Id])));\n      return imagesFgArr;\n    }\n    // getProductVariationsArray(product: IProduct) :FormArray {\n    //   var varsFgArr = this.fb.array([]);\n    //   product.ProductVariations.forEach(pv => {\n    //     const group = new FormGroup({\n    //       Description: new FormControl(pv.Description),\n    //       Price: new FormControl(pv.Price)\n    //     });\n    //     varsFgArr.push(group);\n    //   });\n    //   return varsFgArr;\n    // }\n    getProductVariationsArray(product) {\n      const varsFgArr = this.fb.array([]);\n      product.ProductVariations.forEach(pv => {\n        const group = new FormGroup({\n          Description: new FormControl(pv.Description),\n          Price: new FormControl(pv.Price)\n        });\n        varsFgArr.push(group);\n      });\n      return varsFgArr;\n    }\n    getProductAvailableColoursArray(product) {\n      const clrsFgArr = this.fb.array([]);\n      product.AvailableColours.forEach(clr => {\n        const group = new FormGroup({\n          Colour: new FormControl(clr)\n        });\n        clrsFgArr.push(group);\n      });\n      return clrsFgArr;\n    }\n    saveProduct() {\n      this.isLoading = true;\n      const productImgs = this.productImages.controls.map(im => im.value.toString().trim());\n      // Define the type for `pv` as FormGroup\n      // Ensure the form array is cast as an array of FormGroups\n      const productVariationsArray = this.productForm.get('ProductVariations');\n      // Map over the FormArray's controls, assuming they are FormGroup instances\n      const prodVars = productVariationsArray.controls.map(pv => {\n        const group = pv;\n        return {\n          Description: group.get('Description')?.value || '',\n          Price: group.get('Price')?.value || 0\n        };\n      });\n      const request = {\n        Id: this.prodId?.value ?? 0,\n        Name: this.prodName?.value ?? '',\n        Description: this.prodDescription?.value ?? '',\n        Barcode: this.prodBarcode?.value ?? '',\n        Price: this.prodPrice?.value ?? 0,\n        SalePrice: this.prodSalePrice?.value ?? 0,\n        StockQuantity: this.prodStockQuantity?.value ?? 0,\n        Categories: this.categories.filter(ct => ct.IsBelongToProduct).map(cat => cat.Id),\n        Images: productImgs,\n        UploadedImages: [],\n        ProductVariations: prodVars,\n        AvailableColours: this.prodAvailableColours.controls.map(clr => clr.value.Colour)\n      };\n      this.productServices.saveProductAndFiles(this.filesToUpload, request).subscribe(uploadRes => {\n        uploadRes.UploadedImages.forEach(im => request.UploadedImages.push(im));\n        request.Id = uploadRes.ProductId;\n        //console.log(\"uploadRes.ProductId: \" + uploadRes.ProductId);\n        this.productServices.saveProduct(request).subscribe({\n          next: productId => {\n            this.isLoading = false;\n            this.router.navigateByUrl('/add-product/' + uploadRes.ProductId);\n          },\n          error: err => {\n            this.errorMessage = err;\n            console.log(\"saved failed with error:\" + err);\n            this.isLoading = false;\n          }\n        });\n      });\n    }\n    InvalidControls() {\n      const invalid = [];\n      const controls = this.productForm.controls;\n      for (const name in controls) {\n        if (controls[name].invalid) {\n          invalid.push(name);\n        }\n      }\n      return invalid;\n    }\n    deleteProductVariations(index) {\n      const productVariationsArray = this.productVariations;\n      productVariationsArray.removeAt(index);\n    }\n    deleteAvailableColour(index) {\n      const availableColoursArray = this.prodAvailableColours;\n      availableColoursArray.removeAt(index);\n    }\n    // deleteProductVariations(index: number): void {\n    //   this.productForm.controls['ProductVariations'].value.controls.splice(index, 1);\n    // }\n    // deleteAvailableColour(index: number): void {\n    //   this.productForm.controls['AvailableColours'].value.controls.splice(index, 1);\n    // }\n    addAvailableColour() {\n      const group = new FormGroup({\n        Colour: new FormControl(this.selectedColour)\n      });\n      const availableColoursArray = this.productForm.get('AvailableColours');\n      if (availableColoursArray) {\n        availableColoursArray.push(group);\n      } else {\n        console.error('AvailableColours form array is not defined');\n      }\n    }\n    addVariation(price, description) {\n      if (price.value && description.value) {\n        const group = this.fb.group({\n          Description: [description.value],\n          Price: [price.value]\n        });\n        //const productVariationsArray = this.productForm.get('ProductVariations') as FormArray;\n        const productVariationsArray = this.productVariations;\n        productVariationsArray.push(group);\n        price.reset();\n        description.reset();\n      }\n    }\n    static #_ = this.ɵfac = function AddEditProductComponent_Factory(t) {\n      return new (t || AddEditProductComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductsService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i1.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AddEditProductComponent,\n      selectors: [[\"app-add-edit-product\"]],\n      decls: 62,\n      vars: 25,\n      consts: [[\"productVariationDescription\", \"\"], [\"productVariationPrice\", \"\"], [\"fileUploader\", \"\"], [\"novalidate\", \"\", 3, \"ngSubmit\", \"formGroup\"], [\"class\", \"overlay\", 4, \"ngIf\"], [1, \"card-body\"], [1, \"product-info\"], [1, \"form-group\", \"row\"], [\"for\", \"idId\", 1, \"data-label\"], [\"id\", \"idId\", \"formControlName\", \"Id\", 1, \"form-control\", \"product-price\", 3, \"disabled\"], [\"for\", \"nameId\", 1, \"data-label\"], [\"id\", \"nameId\", \"formControlName\", \"Name\", 1, \"product-name\", \"form-control\", 3, \"ngClass\"], [\"for\", \"priceId\", 1, \"data-label\"], [\"id\", \"priceId\", \"formControlName\", \"Price\", 1, \"product-price\", \"form-control\", 3, \"ngClass\"], [\"for\", \"salePriceId\", 1, \"data-label\"], [\"id\", \"salePriceId\", \"formControlName\", \"SalePrice\", 1, \"product-sale-price\", \"form-control\", 3, \"ngClass\"], [\"for\", \"barcodeId\", 1, \"data-label\"], [\"id\", \"barcodeId\", \"formControlName\", \"Barcode\", 1, \"product-barcode\", \"form-control\"], [\"for\", \"stockQuantityId\", 1, \"data-label\"], [\"id\", \"stockQuantityId\", \"formControlName\", \"StockQuantity\", 1, \"product-stockQuantity\", \"form-control\", 3, \"ngClass\"], [\"for\", \"descriptionId\", 1, \"data-label\"], [\"id\", \"descriptionId\", \"formControlName\", \"Description\", 1, \"product-Description\", \"form-control\"], [1, \"second-panel\"], [\"style\", \"color:red\", 4, \"ngIf\"], [\"class\", \"product-images\", 4, \"ngIf\"], [1, \"product-variations\"], [\"class\", \"form-group\", \"formArrayName\", \"ProductVariations\", 4, \"ngFor\", \"ngForOf\"], [1, \"add-variation-item\"], [1, \"fa\", \"fa-plus-circle\", 3, \"click\"], [\"for\", \"productVariationDescriptionId\", 1, \"data-label\"], [\"id\", \"productVariationDescriptionId\", \"type\", \"text\", 1, \"product-variation-description\", \"form-control\"], [\"form\", \"productVariationPriceId\", 1, \"data-label\"], [\"id\", \"productVariationPriceId\", \"type\", \"text\", 1, \"product-variation-price\", \"form-control\"], [1, \"product-available-colours\"], [1, \"color-picker-div\"], [1, \"color-picker\", 3, \"colorPickerChange\", \"colorPicker\", \"value\"], [1, \"add-color-item\"], [1, \"product-available-colours-data-label\"], [\"class\", \"form-group product-colour\", \"formArrayName\", \"AvailableColours\", 4, \"ngFor\", \"ngForOf\"], [1, \"submit-div\"], [\"type\", \"submit\", \"title\", \"\\u062D\\u0641\\u0638\", 1, \"btn\", \"btn-primary\", \"mr-3\"], [\"class\", \"form-group row categories-row\", 4, \"ngIf\"], [1, \"overlay\"], [\"src\", \"/assets/Images/loading.gif\", 1, \"waiting-image\"], [2, \"color\", \"red\"], [1, \"product-images\"], [\"class\", \"form-group product-image\", \"formArrayName\", \"Images\", 4, \"ngFor\", \"ngForOf\"], [1, \"form-group\", \"uploader\"], [\"for\", \"fileUploader\", 1, \"btn\", \"btn-primary\", \"mr-3\"], [\"src\", \"/assets/Images/AddFile.png\"], [\"id\", \"selectedFileId\", \"name\", \"selectedFileId\", \"type\", \"text\", 1, \"form-control\", \"file-input\", 3, \"value\"], [\"type\", \"file\", \"id\", \"fileUploader\", \"multiple\", \"\", \"accept\", \"image/*\", 2, \"display\", \"none\", 3, \"change\"], [\"formArrayName\", \"Images\", 1, \"form-group\", \"product-image\"], [1, \"produc-image-thumb\"], [3, \"src\"], [1, \"produc-image-name\"], [1, \"delete-icon\"], [\"src\", \"/assets/Images/delete.png\", 2, \"width\", \"20px\", \"height\", \"20px\", 3, \"click\"], [\"formArrayName\", \"ProductVariations\", 1, \"form-group\"], [1, \"product-variation\", 3, \"formGroup\"], [1, \"data-label\"], [1, \"product-variation-description\"], [1, \"product-variation-price\"], [\"formArrayName\", \"AvailableColours\", 1, \"form-group\", \"product-colour\"], [1, \"product-colour-div\", 3, \"formGroup\", \"ngStyle\"], [\"src\", \"/assets/Images/delete.png\", 3, \"click\"], [1, \"form-group\", \"row\", \"categories-row\"], [\"for\", \"DescriptionId\", 1, \"data-label\"], [1, \"categories\"], [\"class\", \"category\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"categories-error-message\", 4, \"ngIf\"], [1, \"category\"], [1, \"container\", 3, \"for\"], [\"type\", \"checkbox\", 3, \"checkedChange\", \"change\", \"id\", \"name\", \"title\", \"value\", \"checked\", \"ngClass\"], [1, \"categories-error-message\"]],\n      template: function AddEditProductComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\");\n          i0.ɵɵtext(1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function AddEditProductComponent_Template_form_ngSubmit_2_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.saveProduct());\n          });\n          i0.ɵɵtemplate(3, AddEditProductComponent_div_3_Template, 2, 0, \"div\", 4);\n          i0.ɵɵelementStart(4, \"div\", 5)(5, \"div\", 6)(6, \"div\", 7)(7, \"label\", 8);\n          i0.ɵɵtext(8, \"\\u0627\\u0644\\u0645\\u0639\\u0631\\u0641:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(9, \"input\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 7)(11, \"label\", 10);\n          i0.ɵɵtext(12, \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 7)(15, \"label\", 12);\n          i0.ɵɵtext(16, \"\\u0627\\u0644\\u0633\\u0639\\u0631:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(17, \"input\", 13);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 7)(19, \"label\", 14);\n          i0.ɵɵtext(20, \"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u062D\\u0645\\u0644\\u0647:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(21, \"input\", 15);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"div\", 7)(23, \"label\", 16);\n          i0.ɵɵtext(24, \"\\u0628\\u0627\\u0631\\u0643\\u0648\\u062F:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(25, \"input\", 17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"div\", 7)(27, \"label\", 18);\n          i0.ɵɵtext(28, \"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0647 \\u0627\\u0644\\u0645\\u062A\\u0648\\u0641\\u0631\\u0647:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(29, \"input\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"div\", 7)(31, \"label\", 20);\n          i0.ɵɵtext(32, \"\\u0627\\u0644\\u0648\\u0635\\u0641:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(33, \"textarea\", 21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(34, \"div\", 22);\n          i0.ɵɵtemplate(35, AddEditProductComponent_div_35_Template, 2, 0, \"div\", 23)(36, AddEditProductComponent_div_36_Template, 9, 2, \"div\", 24);\n          i0.ɵɵelementStart(37, \"div\", 25);\n          i0.ɵɵtemplate(38, AddEditProductComponent_div_38_Template, 12, 3, \"div\", 26);\n          i0.ɵɵelementStart(39, \"div\", 27)(40, \"i\", 28);\n          i0.ɵɵlistener(\"click\", function AddEditProductComponent_Template_i_click_40_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const productVariationDescription_r12 = i0.ɵɵreference(44);\n            const productVariationPrice_r13 = i0.ɵɵreference(48);\n            return i0.ɵɵresetView(ctx.addVariation(productVariationPrice_r13, productVariationDescription_r12));\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(41, \"label\", 29);\n          i0.ɵɵtext(42, \"\\u0627\\u0644\\u0648\\u0635\\u0641:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(43, \"input\", 30, 0);\n          i0.ɵɵelementStart(45, \"label\", 31);\n          i0.ɵɵtext(46, \"\\u0627\\u0644\\u0633\\u0639\\u0631:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(47, \"input\", 32, 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"div\", 33)(50, \"div\", 34);\n          i0.ɵɵtext(51, \" color-picker supposed to go here \");\n          i0.ɵɵelementStart(52, \"input\", 35);\n          i0.ɵɵtwoWayListener(\"colorPickerChange\", function AddEditProductComponent_Template_input_colorPickerChange_52_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.selectedColour, $event) || (ctx.selectedColour = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(53, \"div\", 36)(54, \"i\", 28);\n          i0.ɵɵlistener(\"click\", function AddEditProductComponent_Template_i_click_54_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.addAvailableColour());\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(55, \"label\", 37);\n          i0.ɵɵtext(56, \"\\u0627\\u0644\\u0627\\u0644\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0645\\u062A\\u0648\\u0641\\u0631\\u0647:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(57, AddEditProductComponent_div_57_Template, 4, 4, \"div\", 38);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(58, \"div\", 39)(59, \"button\", 40);\n          i0.ɵɵtext(60, \"\\u062D\\u0641\\u0638\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(61, AddEditProductComponent_div_61_Template, 9, 2, \"div\", 41);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate1(\" \", ctx.InvalidControls(), \"\\n\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.productForm);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", true);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c0, ((ctx.prodName == null ? null : ctx.prodName.touched) || (ctx.prodName == null ? null : ctx.prodName.dirty)) && !(ctx.prodName == null ? null : ctx.prodName.valid)));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(19, _c0, ((ctx.prodPrice == null ? null : ctx.prodPrice.touched) || (ctx.prodPrice == null ? null : ctx.prodPrice.dirty)) && !(ctx.prodPrice == null ? null : ctx.prodPrice.valid)));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(21, _c0, ((ctx.prodSalePrice == null ? null : ctx.prodSalePrice.touched) || (ctx.prodSalePrice == null ? null : ctx.prodSalePrice.dirty)) && !(ctx.prodSalePrice == null ? null : ctx.prodSalePrice.valid)));\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(23, _c0, ((ctx.prodStockQuantity == null ? null : ctx.prodStockQuantity.touched) || (ctx.prodStockQuantity == null ? null : ctx.prodStockQuantity.dirty)) && !(ctx.prodStockQuantity == null ? null : ctx.prodStockQuantity.valid)));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.productForm.controls[\"Images\"].errors);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.productImages);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.productVariations.controls);\n          i0.ɵɵadvance(14);\n          i0.ɵɵstyleProp(\"background\", ctx.selectedColour);\n          i0.ɵɵtwoWayProperty(\"colorPicker\", ctx.selectedColour);\n          i0.ɵɵproperty(\"value\", ctx.selectedColour);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngForOf\", ctx.prodAvailableColours);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.categories);\n        }\n      },\n      dependencies: [i5.ColorPickerDirective, i6.NgClass, i6.NgForOf, i6.NgIf, i6.NgStyle, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i3.FormArrayName],\n      styles: [\".overlay[_ngcontent-%COMP%]{background:#e9e9e9;position:absolute;inset:0;opacity:.5;z-index:1}.waiting-image[_ngcontent-%COMP%]{position:absolute;top:50%;left:45%}.card-body[_ngcontent-%COMP%]{position:relative;border:10px solid aliceblue;background-color:#f0f8ff}.form-group.row[_ngcontent-%COMP%]{text-align:right}.submit-div[_ngcontent-%COMP%]{position:absolute;left:20px;bottom:20px}.submit-div[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100px}.second-panel[_ngcontent-%COMP%]{vertical-align:top;display:inline-block;padding-right:20px;width:50%;height:100%}.uploader[_ngcontent-%COMP%]{width:100%}.uploader[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:inline;width:78%!important;margin-left:0}.uploader[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{float:right;margin:0!important;padding:4px!important}.uploader[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;background-color:transparent;margin-left:5px}.new-files-list[_ngcontent-%COMP%]{margin:0 10px 30px 0}.new-files-list[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{margin-right:10px}.product-variations[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%], .product-image[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%], .new-files-list[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{cursor:pointer;float:left;margin:5px 5px 0 10px;width:20px;height:20px;background-color:transparent}.product-images[_ngcontent-%COMP%]{vertical-align:top}.data-label[_ngcontent-%COMP%]{margin-right:20px;font-weight:700;text-align:right;width:15%}.product-item[_ngcontent-%COMP%]{padding:7px;border:5px solid red;border-radius:10px;width:240px;display:inline-block;margin:10px}.product-info[_ngcontent-%COMP%]{padding:20px;width:50%;display:inline-block;background-color:#f0f8ff}.product-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .product-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .product-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:70%}.categories-row[_ngcontent-%COMP%]{margin-right:0;background-color:#f0f8ff}.categories[_ngcontent-%COMP%]{width:100%}.categories[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;columns:4;-webkit-columns:4;-moz-columns:4;margin:0;line-height:.5}.category[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30px}.category[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked{color:red;background-color:#2196f3}.categories-error-message[_ngcontent-%COMP%]{color:red}.product-image[_ngcontent-%COMP%]{display:inline-block;border:1px solid gray;padding:5px;text-align:right;width:100%}.produc-image-thumb[_ngcontent-%COMP%]{margin-right:10px;display:inline-block}.produc-image-thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px;border:1px solid green;width:40px!important;height:40px!important}.produc-image-name[_ngcontent-%COMP%]{margin-right:5%;width:65%;display:inline-block}.produc-image-icon[_ngcontent-%COMP%]{width:15%;display:inline-block;text-align:left}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:210px}.product-name[_ngcontent-%COMP%]{font-weight:700;display:inline-block;width:100%;text-align:right}.product-price[_ngcontent-%COMP%]{color:#2e8b57;display:inline-block;width:30%}.product-info-line1[_ngcontent-%COMP%]{border:1px solid white;padding:5px}.product-info-line2[_ngcontent-%COMP%]{border:1px solid white;padding:5px;text-align:right}.product-id[_ngcontent-%COMP%]{font-weight:700}.product-info-line3[_ngcontent-%COMP%]{padding-top:5px;text-align:right;width:100%}.cart[_ngcontent-%COMP%]{float:left;display:inline;text-align:left}.product-variations[_ngcontent-%COMP%]{text-align:right}.product-variations[_ngcontent-%COMP%]   .product-variation[_ngcontent-%COMP%]{border:1px solid green}.product-variations[_ngcontent-%COMP%]   .data-label[_ngcontent-%COMP%]{margin-right:10px;margin-left:5px;font-weight:700;text-align:right;width:auto}.product-variations[_ngcontent-%COMP%]   .product-variation-price[_ngcontent-%COMP%]{width:90px;display:inline}.product-variations[_ngcontent-%COMP%]   .product-variation-description[_ngcontent-%COMP%]{width:265px;display:inline}.product-variations[_ngcontent-%COMP%]   .add-variation-item[_ngcontent-%COMP%]{display:inline-block}.product-variations[_ngcontent-%COMP%]   .add-variation-item[_ngcontent-%COMP%]   .fa-plus-circle[_ngcontent-%COMP%]{color:green;font-size:27px;vertical-align:bottom;cursor:pointer}.product-available-colours[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.product-available-colours[_ngcontent-%COMP%]   .color-picker-div[_ngcontent-%COMP%]{display:inline-block;min-width:60px;position:relative}.product-available-colours[_ngcontent-%COMP%]   .color-picker-div[_ngcontent-%COMP%]   input.color-picker[_ngcontent-%COMP%]{top:-15px;width:60px;height:20px;padding:5px;border:1px solid black;border-radius:5px}.product-available-colours[_ngcontent-%COMP%]   .add-color-item[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.product-available-colours[_ngcontent-%COMP%]   .add-color-item[_ngcontent-%COMP%]   .fa-plus-circle[_ngcontent-%COMP%]{color:green;font-size:27px;vertical-align:bottom;cursor:pointer}.product-available-colours[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{cursor:pointer;text-align:left}.product-available-colours[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;display:inline-block}.product-available-colours[_ngcontent-%COMP%]   .product-available-colours-data-label[_ngcontent-%COMP%]{margin-right:10px;margin-left:5px;font-weight:700;text-align:right}.product-available-colours[_ngcontent-%COMP%]   .product-colour[_ngcontent-%COMP%]{width:40px;display:inline-block;border:1px solid black;margin:2px}.product-available-colours[_ngcontent-%COMP%]   .product-colour[_ngcontent-%COMP%]   .product-colour-div[_ngcontent-%COMP%]{width:20px;height:20px;display:inline-block}@media only screen and (max-width: 600px){.product-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .product-info[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:65%}.data-label[_ngcontent-%COMP%]{margin-right:20px;font-weight:700;text-align:right;width:25%}.card-body[_ngcontent-%COMP%]{padding:0;border:none}.product-info[_ngcontent-%COMP%]{padding:20px;width:100%;display:inline-block;background-color:#f0f8ff}.uploader[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:inline;width:64%!important;margin-left:0}.second-panel[_ngcontent-%COMP%]{margin-top:10px;vertical-align:top;display:block;padding-right:20px;width:100%;height:100%}.new-files-list[_ngcontent-%COMP%]{margin:0}.submit-div[_ngcontent-%COMP%]{position:inherit;margin-bottom:20px;text-align:center}.submit-div[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:80%;margin:0!important}}\"]\n    });\n  }\n  return AddEditProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}