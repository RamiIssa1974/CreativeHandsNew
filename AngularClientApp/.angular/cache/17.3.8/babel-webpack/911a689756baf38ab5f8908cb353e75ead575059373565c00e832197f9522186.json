{"ast":null,"code":"import { Renderer2 } from '@angular/core';\nimport { IProduct } from '../../Model/IProduct';\nimport { ProductsService } from '../../services/products.service';\nimport { AuthService } from '../../services/auth.service';\nimport { FilterService } from '../../services/filter.service';\nimport { OrdersService } from '../../services/orders.service';\n//import { Renderer } from '@angular/compiler-cli/ngcc/src/rendering/renderer';\nimport { ActivatedRoute } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/products.service\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"../../services/filter.service\";\nimport * as i5 from \"../../services/orders.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../product-details/product-details.component\";\nconst _c0 = a0 => ({\n  \"is-sale\": a0\n});\nconst _c1 = a0 => ({\n  \"selected-image\": a0\n});\nconst _c2 = a0 => [\"/add-product/\", a0];\nconst _c3 = a0 => ({\n  \"background-color\": a0\n});\nconst _c4 = a0 => ({\n  \"active\": a0\n});\nfunction ProductsListComponent_app_product_details_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-product-details\", 11);\n    i0.ɵɵlistener(\"close\", function ProductsListComponent_app_product_details_2_Template_app_product_details_close_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.closeProductDetailsPopup());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"product\", ctx_r1.selectedProduct);\n  }\n}\nfunction ProductsListComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.emptySearchMessage);\n  }\n}\nfunction ProductsListComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"h1\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.CategoryName);\n  }\n}\nfunction ProductsListComponent_div_7_a_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 33);\n    i0.ɵɵelement(1, \"img\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c2, product_r4.Id));\n  }\n}\nfunction ProductsListComponent_div_7_div_22_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_div_22_div_4_Template_div_click_0_listener($event) {\n      const d_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.selectColour($event, d_r6));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const d_r6 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(2, _c3, d_r6))(\"ngClass\", i0.ɵɵpureFunction1(4, _c4, ctx_r1.toggle));\n  }\n}\nfunction ProductsListComponent_div_7_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"div\")(2, \"span\", 36);\n    i0.ɵɵtext(3, \"\\u0627\\u0644\\u0644\\u0648\\u0646:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(4, ProductsListComponent_div_7_div_22_div_4_Template, 1, 6, \"div\", 37);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", product_r4.AvailableColours);\n  }\n}\nfunction ProductsListComponent_div_7_div_24_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"img\", 45);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_div_24_div_7_Template_img_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      i0.ɵɵnextContext();\n      const prodQuantity_r8 = i0.ɵɵreference(4);\n      const product_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.addToCart(product_r4, prodQuantity_r8.value));\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductsListComponent_div_7_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"span\")(2, \"i\", 40);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_div_24_Template_i_click_2_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const prodQuantity_r8 = i0.ɵɵreference(4);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.decAddProdQuantity(prodQuantity_r8));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(3, \"input\", 41, 1);\n    i0.ɵɵelementStart(5, \"span\")(6, \"i\", 42);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_div_24_Template_i_click_6_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const prodQuantity_r8 = i0.ɵɵreference(4);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.incAddProdQuantity(prodQuantity_r8));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, ProductsListComponent_div_7_div_24_div_7_Template, 2, 0, \"div\", 43);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", product_r4.StockQuantity);\n  }\n}\nfunction ProductsListComponent_div_7_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46);\n    i0.ɵɵelement(1, \"img\", 47);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductsListComponent_div_7_div_26_div_5_option_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const prVar_r14 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", prVar_r14.Id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", prVar_r14.Description, \" \\u0628 \", prVar_r14.Price, \" \\u0634\");\n  }\n}\nfunction ProductsListComponent_div_7_div_26_div_5_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46);\n    i0.ɵɵelement(1, \"img\", 47);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductsListComponent_div_7_div_26_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"div\", 39)(2, \"span\")(3, \"i\", 40);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_div_26_div_5_Template_i_click_3_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const prodQuantity_r12 = i0.ɵɵreference(5);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.decAddProdQuantity(prodQuantity_r12));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(4, \"input\", 41, 1);\n    i0.ɵɵelementStart(6, \"span\")(7, \"i\", 42);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_div_26_div_5_Template_i_click_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const prodQuantity_r12 = i0.ɵɵreference(5);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.incAddProdQuantity(prodQuantity_r12));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"select\", 53, 2);\n    i0.ɵɵlistener(\"change\", function ProductsListComponent_div_7_div_26_div_5_Template_select_change_8_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const prodQuantity_r12 = i0.ɵɵreference(5);\n      const varTotal_r13 = i0.ɵɵreference(13);\n      const product_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.changeSelectedProductVariation(product_r4, $event.target.value, prodQuantity_r12, varTotal_r13));\n    });\n    i0.ɵɵtemplate(10, ProductsListComponent_div_7_div_26_div_5_option_10_Template, 2, 3, \"option\", 54);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 44);\n    i0.ɵɵelement(12, \"input\", 55, 3);\n    i0.ɵɵelementStart(14, \"img\", 45);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_div_26_div_5_Template_img_click_14_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const prodQuantity_r12 = i0.ɵɵreference(5);\n      const selectedPrice_r15 = i0.ɵɵreference(9);\n      const product_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.addToCart(product_r4, prodQuantity_r12.value, selectedPrice_r15));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, ProductsListComponent_div_7_div_26_div_5_div_15_Template, 2, 0, \"div\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r4 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", product_r4.ProductVariations);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"value\", product_r4.ProductVariations[0].Price);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !product_r4.StockQuantity);\n  }\n}\nfunction ProductsListComponent_div_7_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 48)(1, \"div\", 49)(2, \"span\", 13);\n    i0.ɵɵtext(3, \"\\u0627\\u0645\\u0643\\u0627\\u0646\\u064A\\u0627\\u062A \\u0633\\u0639\\u0631 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"i\", 50);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_div_26_Template_i_click_4_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const product_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.closeDiv(product_r4.Id));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, ProductsListComponent_div_7_div_26_div_5_Template, 16, 3, \"div\", 51);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate1(\"id\", \"productVariations\", product_r4.Id, \"Div\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", product_r4.ProductVariations[0]);\n  }\n}\nfunction ProductsListComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ɵɵelement(2, \"img\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 17);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_Template_div_click_3_listener() {\n      const product_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.showProduct(product_r4));\n    });\n    i0.ɵɵelement(4, \"img\", 18, 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 19)(7, \"div\", 20);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_Template_div_click_7_listener() {\n      const product_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.showProduct(product_r4));\n    });\n    i0.ɵɵelementStart(8, \"div\", 21);\n    i0.ɵɵtext(9);\n    i0.ɵɵtemplate(10, ProductsListComponent_div_7_a_10_Template, 2, 3, \"a\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 23)(12, \"span\", 24);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\", 25);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \" \\u0634.\\u062C. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 26);\n    i0.ɵɵlistener(\"click\", function ProductsListComponent_div_7_Template_div_click_17_listener() {\n      const product_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.showProduct(product_r4));\n    });\n    i0.ɵɵelementStart(18, \"span\");\n    i0.ɵɵtext(19, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"span\", 27);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(22, ProductsListComponent_div_7_div_22_Template, 5, 1, \"div\", 28);\n    i0.ɵɵelementStart(23, \"div\", 29);\n    i0.ɵɵtemplate(24, ProductsListComponent_div_7_div_24_Template, 8, 1, \"div\", 30)(25, ProductsListComponent_div_7_div_25_Template, 2, 0, \"div\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(26, ProductsListComponent_div_7_div_26_Template, 6, 3, \"div\", 32);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r4 = ctx.$implicit;\n    const img_r16 = i0.ɵɵreference(5);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(14, _c0, product_r4.SalePrice && product_r4.SalePrice > 0 && product_r4.SalePrice < product_r4.Price));\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"/assets/Images/\", product_r4.Images[0], \"?ver=111221\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(16, _c1, img_r16.selected));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", product_r4.Name, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isLoggedIn && ctx_r1.isAdmin);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(18, _c0, product_r4.SalePrice && product_r4.SalePrice > 0 && product_r4.SalePrice < product_r4.Price));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r4.Price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r4.SalePrice);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate((\"000\" + product_r4.Id).slice(-4));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", product_r4.AvailableColours && product_r4.AvailableColours.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", product_r4.StockQuantity);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !product_r4.StockQuantity);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", product_r4.ProductVariations);\n  }\n}\n//import { CookieService} from 'ngx-cookie-service'\nexport let ProductsListComponent = /*#__PURE__*/(() => {\n  class ProductsListComponent {\n    get isLoggedIn() {\n      return this.authService.isLoggedIn;\n    }\n    get isAdmin() {\n      return this.authService.isAdmin;\n    }\n    constructor(route, productServices, authService, filterService, orderService, renderer) {\n      this.route = route;\n      this.productServices = productServices;\n      this.authService = authService;\n      this.filterService = filterService;\n      this.orderService = orderService;\n      this.renderer = renderer;\n      //selectedProduct: IProduct = createDefaultProduct();\n      this.selectedProduct = null;\n      this.CategoryName = \"\";\n      this.categoryId = 6;\n      this.emptySearchMessage = \"لم يتم العثور على كلمة البحث\";\n      this.showEmptySearch = false;\n      this.isAlive = true;\n      this.products = [];\n      this.filteredProducts = [];\n      this.errorMessage = 'OK';\n      this.showAddedToCartMessage = false;\n      this.selectedColours = [];\n      this.clickedImage = null;\n      this.renderer.listen('window', 'click', e => {\n        let isSelected = false;\n        if (e.target == this.clickedImage) {\n          isSelected = e.target.classList.contains(\"selected-image\");\n        }\n        let selectedImages = document.querySelector(\"img.selected-image\");\n        if (selectedImages) {\n          selectedImages.classList.remove(\"selected-image\");\n        }\n        if (e.target == this.clickedImage) {\n          if (!isSelected) {\n            e.target.classList.add(\"selected-image\");\n          }\n        }\n      });\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        const idParam = params['id'];\n        this.categoryId = isNaN(+idParam) ? -1 : +idParam;\n        this.productServices.getCategoryById(this.categoryId).subscribe(cat => {\n          if (cat) this.CategoryName = cat.Name;\n        });\n        let searchFilter = params['search'];\n        console.log(\"products-lest: this.productId:\" + JSON.stringify(params));\n        var searchId = !isNaN(searchFilter) ? searchFilter : -1;\n        let search = {\n          Id: searchId,\n          Barcode: searchFilter,\n          Description: searchFilter,\n          Name: searchFilter,\n          CategoryId: this.categoryId,\n          SubCategoryId: -1\n        };\n        this.productServices.getProducts(search).subscribe({\n          next: products => {\n            this.products = products;\n            this.filteredProducts = this.products;\n            this.showEmptySearch = !this.filteredProducts || !this.filteredProducts.length;\n          },\n          error: err => this.errorMessage = err\n        });\n      });\n      this.orderService.setShowCart(true);\n      //document.cookie = \"name=Rami\";\n      console.log(\"document.cookie:\" + this.orderService.getUserIdFromCookies());\n      this.filterService.productFilterOBS.subscribe(filterStr => {\n        this.showEmptySearch = false;\n        var searchId = !isNaN(parseInt(filterStr)) ? parseInt(filterStr) : -1;\n        this.filteredProducts = this.products.filter(prod => prod.Name.includes(filterStr) || prod.Description.includes(filterStr) || searchId > 0 && prod.Id == searchId);\n        console.log(\"this.filteredProducts.length: \" + !this.filteredProducts.length);\n        this.showEmptySearch = filterStr.length > 0 && (!this.filteredProducts || !this.filteredProducts.length);\n      });\n    }\n    incAddProdQuantity(elm) {\n      if (elm && elm.value) {\n        elm.value = (parseInt(elm.value, 10) + 1).toString();\n      }\n    }\n    decAddProdQuantity(elm) {\n      let value = parseInt(elm.value, 10);\n      if (value > 1) {\n        value--;\n        elm.value = value.toString();\n      }\n    }\n    addToCart(product, quantity, selectedPrice) {\n      // console.log(\"quantity:\" + quantity + \"product:\" + JSON.stringify(product));\n      let productVariationsDiv = null;\n      if (product.ProductVariations.length > 0) {\n        let id = \"productVariations\" + product.Id.toString() + \"Div\";\n        console.log(\"productVariations id is:\" + id);\n        productVariationsDiv = document.querySelector(\"#\" + id);\n        if (!selectedPrice) {\n          productVariationsDiv.classList.remove(\"hidden\");\n          return;\n        }\n      }\n      let prodVar = product.ProductVariations.find(x => x.Id.toString() == selectedPrice.value);\n      let orderItem = {\n        Id: -1,\n        OrderId: -1,\n        UnitPrice: prodVar ? prodVar.Price : -1,\n        Quantity: quantity,\n        Note: \"\",\n        ProductVariation: prodVar ?? null,\n        Product: product,\n        Colours: this.selectedColours\n      };\n      this.orderService.addToCart(orderItem).subscribe(orderId => {\n        this.selectedColours = [];\n        this.orderService.updateCartQuantity(orderItem.Quantity);\n        if (productVariationsDiv != null) {\n          productVariationsDiv.classList.add(\"hidden\");\n        }\n      });\n      this.showAddedToCartMessage = true;\n      setTimeout(() => {\n        this.showAddedToCartMessage = false;\n      }, 3000);\n    } //End of addToCart function\n    closeDiv(productId) {\n      let id = \"productVariations\" + productId + \"Div\";\n      let productVariationsDiv = document.querySelector(\"#\" + id);\n      productVariationsDiv.classList.add(\"hidden\");\n    }\n    changeSelectedProductVariation(product, selectedPriceId, prodQuantity, varTotal) {\n      const selectedPriceIdNumber = Number(selectedPriceId);\n      const prodVar = product.ProductVariations.find(x => x.Id === selectedPriceIdNumber);\n      if (prodVar) {\n        varTotal.value = (Number(prodVar.Price) * Number(prodQuantity.value)).toString();\n      } else {\n        varTotal.value = '0'; // Set to default value if not found\n      }\n    }\n    selectColour(event, colour) {\n      const target = event.target;\n      const hasClass = target.classList.contains('selected');\n      if (hasClass) {\n        target.classList.remove('selected');\n        this.selectedColours = this.selectedColours.filter(clr => clr !== colour);\n      } else {\n        target.classList.add('selected');\n        this.selectedColours.push(colour);\n      }\n    }\n    showProduct(product) {\n      this.selectedProduct = product;\n      let productPopup = document.querySelector(\".popup\");\n      if (productPopup != null) productPopup.hidden = false;\n      let modalBackdrop = document.querySelector(\".modal-backdrop\");\n      if (modalBackdrop) {\n        modalBackdrop.style.display = \"block\";\n      } else {\n        console.error(\"Modal backdrop element not found\");\n      }\n    }\n    closeProductDetailsPopup() {\n      this.selectedProduct = null;\n    }\n    static #_ = this.ɵfac = function ProductsListComponent_Factory(t) {\n      return new (t || ProductsListComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductsService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.FilterService), i0.ɵɵdirectiveInject(i5.OrdersService), i0.ɵɵdirectiveInject(i0.Renderer2));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProductsListComponent,\n      selectors: [[\"app-products-list\"]],\n      decls: 8,\n      vars: 5,\n      consts: [[\"img\", \"\"], [\"prodQuantity\", \"\"], [\"selectedPrice\", \"\"], [\"varTotal\", \"\"], [1, \"product-list\"], [1, \"modal-backdrop\"], [3, \"product\", \"close\", 4, \"ngIf\"], [1, \"added-to-cart-message\", 3, \"hidden\"], [\"class\", \"empty-seaarch\", 4, \"ngIf\"], [\"class\", \"title\", 4, \"ngIf\"], [\"class\", \"product-item\", 4, \"ngFor\", \"ngForOf\"], [3, \"close\", \"product\"], [1, \"empty-seaarch\"], [1, \"title\"], [1, \"product-item\"], [1, \"sale-image\", 3, \"ngClass\"], [\"src\", \"/assets/Images/Sale.png\"], [1, \"product-image\", 3, \"click\"], [3, \"src\", \"ngClass\"], [1, \"product-info\"], [1, \"product-info-line1\", 3, \"click\"], [1, \"product-name\"], [\"title\", \"\\u062A\\u0639\\u062F\\u064A\\u0644\", 3, \"routerLink\", 4, \"ngIf\"], [1, \"product-price\", 3, \"ngClass\"], [1, \"normal-price\"], [1, \"sale-price\"], [1, \"product-info-line2\", 3, \"click\"], [1, \"product-id\"], [\"class\", \"product-info-line2 product-available-colours\", 4, \"ngIf\"], [1, \"product-info-line3\"], [\"class\", \"added-to-cart-quantity\", 4, \"ngIf\"], [\"class\", \"finished-in-stock\", 4, \"ngIf\"], [\"class\", \"product-variations hidden\", 3, \"id\", 4, \"ngIf\"], [\"title\", \"\\u062A\\u0639\\u062F\\u064A\\u0644\", 3, \"routerLink\"], [\"src\", \"/assets/Images/edit-icon.jpg\", \"width\", \"20\", \"height\", \"20\"], [1, \"product-info-line2\", \"product-available-colours\"], [1, \"data-label\"], [\"class\", \"product-colour\", 3, \"ngStyle\", \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"product-colour\", 3, \"click\", \"ngStyle\", \"ngClass\"], [1, \"added-to-cart-quantity\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-minus\", 3, \"click\"], [\"type\", \"number\", \"value\", \"1\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-plus\", 3, \"click\"], [\"class\", \"cart\", 4, \"ngIf\"], [1, \"cart\"], [\"width\", \"30\", \"src\", \"/assets/Images/cart.png\", \"alt\", \"\\u0627\\u0636\\u0641 \\u0627\\u0644\\u0649 \\u0639\\u062C\\u0644\\u0647 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A\", \"title\", \"\\u0627\\u0636\\u0641 \\u0627\\u0644\\u0649 \\u0639\\u062C\\u0644\\u0647 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A\", 3, \"click\"], [1, \"finished-in-stock\"], [\"width\", \"80\", \"src\", \"/assets/Images/FinishedInStock.jpg\", \"alt\", \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631 \\u062D\\u0627\\u0644\\u064A\\u0627\", \"title\", \"\\u0647\\u0630\\u0627 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C \\u063A\\u064A\\u0631 \\u0645\\u062A\\u0648\\u0641\\u0631 \\u062D\\u0627\\u0644\\u064A\\u0627\"], [1, \"product-variations\", \"hidden\", 3, \"id\"], [1, \"popup-header\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-window-close\", 3, \"click\"], [\"class\", \"popup-body\", 4, \"ngIf\"], [1, \"popup-body\"], [3, \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"disabled\", \"disabled\", 1, \"var-tota-price\", 3, \"value\"], [3, \"value\"]],\n      template: function ProductsListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 4);\n          i0.ɵɵelement(1, \"div\", 5);\n          i0.ɵɵtemplate(2, ProductsListComponent_app_product_details_2_Template, 1, 1, \"app-product-details\", 6);\n          i0.ɵɵelementStart(3, \"div\", 7);\n          i0.ɵɵtext(4, \"\\u0627\\u0636\\u064A\\u0641 \\u0627\\u0644\\u0645\\u0646\\u062A\\u062C \\u0627\\u0644\\u0649 \\u0633\\u0644\\u0629 \\u0627\\u0644\\u0645\\u0634\\u062A\\u0631\\u064A\\u0627\\u062A\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, ProductsListComponent_div_5_Template, 2, 1, \"div\", 8)(6, ProductsListComponent_div_6_Template, 3, 1, \"div\", 9)(7, ProductsListComponent_div_7_Template, 27, 20, \"div\", 10);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.selectedProduct);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"hidden\", !ctx.showAddedToCartMessage);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.showEmptySearch);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.CategoryName);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngForOf\", ctx.filteredProducts);\n        }\n      },\n      dependencies: [i6.NgClass, i6.NgForOf, i6.NgIf, i6.NgStyle, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i1.RouterLink, i8.ProductDetailsComponent],\n      styles: [\".modal-backdrop[_ngcontent-%COMP%]{background-color:#00000045;z-index:1;display:none}.product-available-colours[_ngcontent-%COMP%]{text-align:right;padding:10px 0}.product-available-colours[_ngcontent-%COMP%]   .product-colour[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:5px;display:inline-block;margin:2px}.product-available-colours[_ngcontent-%COMP%]   .product-colour.selected[_ngcontent-%COMP%]{border:2px solid black;position:relative}.product-available-colours[_ngcontent-%COMP%]   .product-colour.selected[_ngcontent-%COMP%]:after{position:absolute;top:0;left:4px;font-size:14px;font-family:FontAwesome;content:\\\"\\\\f00c\\\";color:#fff}.product-list[_ngcontent-%COMP%]{position:relative;width:100%;min-height:600px;top:45px}.title[_ngcontent-%COMP%]{text-align:right;width:96%;display:flex}.empty-seaarch[_ngcontent-%COMP%]{text-align:right;color:red;font-size:20px;border:3px solid gray;padding:20px;box-shadow:#d3d3d3 5px 10px;border-radius:7px}.added-to-cart-message[_ngcontent-%COMP%]{text-align:center;border:2px double green;border-radius:10px;padding:20px;position:fixed;width:30%;top:10%;left:35%;z-index:1;background-color:#add8e6;color:#00008b}.product-item[_ngcontent-%COMP%]{position:relative;padding:7px;border:5px solid red;border-radius:10px;width:240px;display:inline-block;margin:10px}.product-info[_ngcontent-%COMP%]{width:100%;display:inline-block;background-color:#f0f8ff}.sale-image.is-sale[_ngcontent-%COMP%]{display:block;position:absolute;top:-5px;left:-10px;z-index:1}.sale-image[_ngcontent-%COMP%]:not(.is-sale){display:none}.product-image[_ngcontent-%COMP%]{display:inline-block;position:relative}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;width:210px}.product-image[_ngcontent-%COMP%]   img.selected-image[_ngcontent-%COMP%]{position:absolute;bottom:0;right:-90px;z-index:1;border:1px solid black;height:300px;width:400px}.product-name[_ngcontent-%COMP%]{font-weight:700;display:inline-block;width:65%;text-align:right}.product-price[_ngcontent-%COMP%]{display:inline-block;width:35%}.product-price[_ngcontent-%COMP%]:not(.is-sale)   .normal-price[_ngcontent-%COMP%]{color:#000}.product-price[_ngcontent-%COMP%]:not(.is-sale)   .sale-price[_ngcontent-%COMP%]{display:none}.product-price.is-sale[_ngcontent-%COMP%]   .normal-price[_ngcontent-%COMP%]{color:gray;text-decoration:line-through;margin-right:5px}.product-price.is-sale[_ngcontent-%COMP%]   .sale-price[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:18px}.product-info-line1[_ngcontent-%COMP%]{border:1px solid white;padding:5px}.product-info-line2[_ngcontent-%COMP%]{border:1px solid white;padding:5px;text-align:right}.product-id[_ngcontent-%COMP%]{font-weight:700}.product-info-line3[_ngcontent-%COMP%]{padding-top:5px;text-align:right;width:100%}.added-to-cart-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;margin:0 5px}.added-to-cart-quantity[_ngcontent-%COMP%]{display:inline-block}.fa.fa-minus[_ngcontent-%COMP%]{color:red;font-size:20px;margin:0 2px}.fa.fa-plus[_ngcontent-%COMP%]{color:green;font-size:20px;margin:0 2px 0 12px}.cart[_ngcontent-%COMP%]{display:inline-block;float:left;display:inline;text-align:left;cursor:pointer}.finished-in-stock[_ngcontent-%COMP%]{display:inline-block;float:left;display:inline;text-align:left;border:1px solid red;border-radius:3px}.product-variations[_ngcontent-%COMP%]{background-color:beige;padding:0;display:block;position:absolute;bottom:0;left:-10px;z-index:1;border:4px solid black;height:200px;width:330px}.product-variations.hidden[_ngcontent-%COMP%]{display:none}.product-variations[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{height:27px;text-align:left;background-color:bisque;padding:2px 8px 0 4px}.product-variations[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .fa-window-close[_ngcontent-%COMP%]{color:red;font-size:24px;float:left}.product-variations[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:right}.product-variations[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]{padding:10px;text-align:right}.product-variations[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:207px;padding-right:15px;height:30px;margin-right:18px}.product-variations[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .cart[_ngcontent-%COMP%]{display:block;padding-top:15px}.product-variations[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .cart[_ngcontent-%COMP%]   .var-tota-price[_ngcontent-%COMP%]{width:60px;margin-left:20px}@media only screen and (max-width: 600px){.product-item[_ngcontent-%COMP%]{position:relative;padding:4px;border:1px solid red;border-radius:5px;width:95%;display:inline-block;margin:2%}.product-info[_ngcontent-%COMP%]{vertical-align:top;text-align:right;width:70%;height:100px;display:inline-block;background-color:#f0f8ff}.product-name[_ngcontent-%COMP%]{font-weight:700;display:inline-block;text-align:right;width:auto}.product-price[_ngcontent-%COMP%]{float:left;color:#00f;font-weight:700;display:inline-block;width:auto}.product-image[_ngcontent-%COMP%]{vertical-align:top;width:30%;display:inline-block;position:relative}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px;height:100px;width:100%;border:1px solid #2b5590}.product-image[_ngcontent-%COMP%]   img.selected-image[_ngcontent-%COMP%]{position:absolute;bottom:-140px;right:-0px;z-index:1;border:3px solid #95a7f5;height:200px;width:300px}.product-info-line3[_ngcontent-%COMP%]{text-align:left;background-color:#f0f8ff}.product-info-line3[_ngcontent-%COMP%]   .cart[_ngcontent-%COMP%]{float:none;opacity:.6}.added-to-cart-message[_ngcontent-%COMP%]{text-align:center;border:2px double green;border-radius:10px;padding:20px;position:fixed;width:80%;top:30%;left:10%;z-index:1;background-color:#add8e6;color:#00008b}}\"]\n    });\n  }\n  return ProductsListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}