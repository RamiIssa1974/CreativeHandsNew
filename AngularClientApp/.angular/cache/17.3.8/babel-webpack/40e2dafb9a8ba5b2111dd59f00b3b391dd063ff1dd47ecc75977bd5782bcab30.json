{"ast":null,"code":"import { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = a0 => ({\n  \"is-invalid\": a0\n});\nconst _c1 = () => [\"/\"];\nfunction LoginComponent_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" \\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0627\\u062F\\u062E\\u0627\\u0644 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" \\u0627\\u0644\\u0631\\u062C\\u0627\\u0621 \\u0627\\u062F\\u062E\\u0627\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.errorMessage, \" \");\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.errorMessage = '';\n      this.pageTitle = 'تسجيل الدخول Login';\n    }\n    login(loginForm) {\n      //console.log(\"Logging in!\");\n      if (loginForm && loginForm.valid) {\n        const userName = loginForm.form.value.userName;\n        const password = loginForm.form.value.password;\n        this.authService.login(userName, password).subscribe(user => {\n          //console.log(\"user: \" + user);\n          //console.log(\"this.authService.isLoggedIn: \" + this.authService.isLoggedIn);\n          if (user && this.authService.isLoggedIn) {\n            this.router.navigateByUrl(this.authService.redirectUrl || '/');\n          } else {\n            this.errorMessage = ' المستخدم غير موجود';\n          }\n        });\n      } else {\n        this.errorMessage = 'خطأ في بيانات المستخدم';\n      }\n    }\n    static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 30,\n      vars: 13,\n      consts: [[\"loginForm\", \"ngForm\"], [\"userNameVar\", \"ngModel\"], [\"passwordVar\", \"ngModel\"], [1, \"card\", \"main-frame\"], [1, \"card-header\"], [1, \"card-body\"], [\"novalidate\", \"\", \"autocomplete\", \"off\", 3, \"ngSubmit\"], [1, \"form-group\", \"row\"], [\"for\", \"userNameId\", 1, \"col-md-3\", \"col-form-label\"], [1, \"col-md-7\"], [\"id\", \"userNameId\", \"type\", \"text\", \"placeholder\", \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 (\\u0645\\u0637\\u0644\\u0648\\u0628)\", \"required\", \"\", \"ngModel\", \"\", \"name\", \"userName\", 1, \"form-control\", 3, \"ngClass\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [\"for\", \"passwordId\", 1, \"col-md-3\", \"col-form--label\"], [\"id\", \"passwordId\", \"type\", \"password\", \"placeholder\", \"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631 (\\u0645\\u0637\\u0644\\u0648\\u0628)\", \"required\", \"\", \"ngModel\", \"\", \"name\", \"password\", 1, \"form-control\", 3, \"ngClass\"], [1, \"row\"], [1, \"col-md-8\", \"offset-md-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mr-3\", 2, \"width\", \"80px\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"cancel\", 2, \"width\", \"80px\", 3, \"routerLink\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"alert\", \"alert-danger\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4);\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 5)(4, \"form\", 6, 0);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const loginForm_r2 = i0.ɵɵreference(5);\n            return i0.ɵɵresetView(ctx.login(loginForm_r2));\n          });\n          i0.ɵɵelementStart(6, \"fieldset\")(7, \"div\", 7)(8, \"label\", 8);\n          i0.ɵɵtext(9, \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 9);\n          i0.ɵɵelement(11, \"input\", 10, 1);\n          i0.ɵɵelementStart(13, \"span\", 11);\n          i0.ɵɵtemplate(14, LoginComponent_span_14_Template, 2, 0, \"span\", 12);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(15, \"div\", 7)(16, \"label\", 13);\n          i0.ɵɵtext(17, \"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 9);\n          i0.ɵɵelement(19, \"input\", 14, 2);\n          i0.ɵɵelementStart(21, \"span\", 11);\n          i0.ɵɵtemplate(22, LoginComponent_span_22_Template, 2, 0, \"span\", 12);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(23, \"div\", 15)(24, \"div\", 16)(25, \"button\", 17);\n          i0.ɵɵtext(26, \" \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644 \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"button\", 18);\n          i0.ɵɵtext(28, \" \\u0627\\u0644\\u063A\\u0627\\u0621 \");\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵtemplate(29, LoginComponent_div_29_Template, 2, 1, \"div\", 19);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          const loginForm_r2 = i0.ɵɵreference(5);\n          const userNameVar_r4 = i0.ɵɵreference(12);\n          const passwordVar_r5 = i0.ɵɵreference(20);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" \", ctx.pageTitle, \" \");\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c0, (userNameVar_r4.touched || userNameVar_r4.dirty) && !userNameVar_r4.valid));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", userNameVar_r4.errors == null ? null : userNameVar_r4.errors.required);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c0, (passwordVar_r5.touched || passwordVar_r5.dirty) && !passwordVar_r5.valid));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", passwordVar_r5.errors == null ? null : passwordVar_r5.errors.required);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", !loginForm_r2.valid);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(12, _c1));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i2.RouterLink],\n      styles: [\".main-frame[_ngcontent-%COMP%]{width:50%;margin:auto}.btn.cancel[_ngcontent-%COMP%]{margin-right:10px}@media only screen and (max-width: 600px){.main-frame[_ngcontent-%COMP%]{width:95%;margin:auto}}\"]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}